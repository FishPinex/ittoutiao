"use strict";(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[145],{5291:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main"},[a("van-nav-bar",{attrs:{fixed:""},scopedSlots:t._u([{key:"right",fn:function(){return[a("van-icon",{attrs:{name:"search",size:"0.64rem",color:"#fff"},on:{click:t.showSerchComponent}})]},proxy:!0}])})],1),a("div",[a("van-tabs",{attrs:{sticky:"","offset-top":"1.23rem",animated:"",color:"rgb(54, 101, 255)"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.userChannelList,(function(e){return a("van-tab",{key:e.id,attrs:{title:e.name,name:e.id}},[a("article-list",{attrs:{channelId:t.active}})],1)})),1)],1)])},s=[],n=a(5394),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}},[a("van-list",{attrs:{finished:t.finished,"finished-text":"没有新闻给你看辣！","immediate-check":!1,offset:"50"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.articleList,(function(e){return a("article-item",{key:e.art_id,attrs:{articleObj:e},on:{disLikeEV:t.disLikeFn,feedbackDustbin:t.dustbin},nativeOn:{click:function(a){return t.itemClickFn(e.art_id)}}})})),1)],1)],1)},c=[],l=(a(5642),a(8398)),d=a(9962),o={data(){return{articleList:[],loading:!1,finished:!1,defaultTime:(new Date).getTime(),isLoading:!1}},async created(){const t=await(0,n.Us)({channel_id:this.channelId,timestamp:this.defaultTime});this.articleList=t.data.data.results,this.defaultTime=t.data.data.pre_timestamp},methods:{async onLoad(){const t=await(0,n.Us)({channel_id:this.channelId,timestamp:this.defaultTime});null===t.data.data.pre_timestamp?this.finished=!0:(this.articleList=[...this.articleList,...t.data.data.results],this.defaultTime=t.data.data.pre_timestamp,this.loading=!1)},async onRefresh(){this.articleList=[],this.defaultTime=(new Date).getTime();const t=await(0,n.Us)({channel_id:this.channelId,timestamp:this.defaultTime});this.articleList=[...this.articleList,...t.data.data.results],this.defaultTime=t.data.data.pre_timestamp,this.isLoading=!1},async disLikeFn(t){await(0,n.AJ)({artId:t}),(0,l.Z)({type:"success",message:"之后会减少类似推荐"})},async dustbin(t,e){await(0,n.dv)({artId:t,type:e}),(0,l.Z)({type:"success",message:"反馈成功"})},itemClickFn(t){this.$router.push({path:`/article_detail?art_id=${t}`})}},props:{channelId:Number},components:{ArticleItem:d.Z}},h=o,u=a(1001),m=(0,u.Z)(h,r,c,!1,null,"16442ada",null),f=m.exports,p={data(){return{userChannelList:[],active:0}},created(){this.getUserChannelList()},methods:{async getUserChannelList(){const t=await(0,n.U5)();this.userChannelList=t.data.data.channels},showSerchComponent(){this.$router.push("/search")}},components:{ArticleList:f}},v=p,L=(0,u.Z)(v,i,s,!1,null,"454a6c07",null),k=L.exports}}]);
//# sourceMappingURL=145.09d8bb27.js.map