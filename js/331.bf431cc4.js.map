{"version":3,"file":"js/331.bf431cc4.js","mappings":"oKAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,2BAA2B,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,aAAa,GAAG,MAAQ,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOT,EAAIU,QAAQC,IAAI,QAAQ,GAAGP,EAAG,MAAM,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC,SAAWP,EAAIY,SAAS,gBAAgB,QAAQ,mBAAkB,GAAOJ,GAAG,CAAC,KAAOR,EAAIa,QAAQC,MAAM,CAACC,MAAOf,EAAW,QAAEgB,SAAS,SAAUC,GAAMjB,EAAIkB,QAAQD,GAAKE,WAAW,YAAYnB,EAAIoB,GAAIpB,EAAgB,cAAE,SAASqB,GAAM,OAAOjB,EAAG,eAAe,CAACkB,IAAID,EAAKE,OAAOhB,MAAM,CAAC,WAAac,EAAK,QAAS,GAAOG,SAAS,CAAC,MAAQ,SAASf,GAAQ,OAAOT,EAAIyB,eAAeJ,EAAKE,eAAc,IAAI,MAC5sBG,EAAkB,G,oBC+BtB,GACEC,KAAM,eACNC,OACE,MAAO,CAELC,KAAM,EAENC,aAAc,GAGdZ,SAAS,EACTN,UAAU,IAGdmB,gBACE,MAAMC,QAAY,QAAmB,CACnCH,KAAM5B,KAAK4B,KAGXI,EAAGhC,KAAKiC,OAAOC,OAAOC,WAIxBnC,KAAK6B,aAAeE,EAAIJ,KAAKA,KAAKS,SAEpCC,QAAS,CAEPP,eAGE,GADA9B,KAAK4B,OACD5B,KAAK6B,aAAaS,OAAS,EAAG,CAEhC,MAAMP,QAAY,QAAmB,CACnCH,KAAM5B,KAAK4B,KACXI,EAAGhC,KAAKiC,OAAOC,OAAOC,WAGa,IAAjCJ,EAAIJ,KAAKA,KAAKS,QAAQE,OACxBtC,KAAKW,UAAW,GAEhBX,KAAK6B,aAAe,IAAI7B,KAAK6B,gBAAiBE,EAAIJ,KAAKA,KAAKS,SAC5DpC,KAAKiB,SAAU,KAKrBO,eAAee,GAEbvC,KAAKS,QAAQ+B,KAAK,0BAA0BD,OAGhDE,WAAY,CACVC,YAAWA,EAAAA,ICpFkQ,I,UCQ7QC,GAAY,OACd,EACA7C,EACA2B,GACA,EACA,KACA,WACA,MAIF,EAAekB,EAAiB","sources":["webpack://heimatoutiao/./src/components/search/SerachResult.vue?b9a3","webpack://heimatoutiao/src/components/search/SerachResult.vue","webpack://heimatoutiao/./src/components/search/SerachResult.vue?73ff","webpack://heimatoutiao/./src/components/search/SerachResult.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"search-result-container\"},[_c('van-nav-bar',{attrs:{\"title\":\"搜索结果\",\"left-arrow\":\"\",\"fixed\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}})],1),_c('div',[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.searchResult),function(item){return _c('article-item',{key:item.art_id,attrs:{\"articleObj\":item,\"isShow\":false},nativeOn:{\"click\":function($event){return _vm.skipToDetailFn(item.art_id)}}})}),1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!--\r\n  业务：\r\n  404：指的是第三方的数据删除了，服务器上找不到对应的资源，但是前端的路径还在，所以会报错\r\n  解决：前端给个占位图提示图片走丢了\r\n  403：指的是你无权请求此地址，后端做了图片防盗链\r\n  原因：防止你用img标签来请求此图片（它不想让他的图片被你的网站所引用）\r\n  解决：meta不然浏览器携带请求头的reffer,让后端判断失效\r\n  <meta name=\"referrer\" content=\"no-referrer\" />\r\n -->\r\n  <div>\r\n    <!-- 搜索结果页-头部导航 -->\r\n    <div class=\"search-result-container\">\r\n      <!-- 点击实现后退效果 -->\r\n      <van-nav-bar title=\"搜索结果\" left-arrow @click-left=\"$router.go(-1)\" fixed />\r\n    </div>\r\n\r\n    <!-- 搜索结果页 -->\r\n    <div>\r\n      <!-- 需要加载更多，所以用list组件包裹起来 -->\r\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多了\" @load=\"onLoad\" :immediate-check=\"false\">\r\n        <!-- .native修饰符:给组件内的根标签绑定原生的事件 -->\r\n        <article-item v-for=\"item in searchResult\" :key=\"item.art_id\" :articleObj=\"item\" :isShow=\"false\" @click.native=\"skipToDetailFn(item.art_id)\"></article-item>\r\n      </van-list>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getSearchResultAPI } from '@/api/api.js'\r\n// 引入ArticleItem组件\r\nimport ArticleItem from '@/components/home/ArticleItem.vue'\r\nexport default {\r\n  name: 'SearchResult',\r\n  data() {\r\n    return {\r\n      // 获取搜索结果的页码值\r\n      page: 1,\r\n      // 获取到的搜索结果\r\n      searchResult: [],\r\n\r\n      // 控制上拉加载的配置项\r\n      loading: false,\r\n      finished: false\r\n    }\r\n  },\r\n  async created() {\r\n    const res = await getSearchResultAPI({\r\n      page: this.page,\r\n      // 因为你之前定义路由的时候就是用的keywords,所以通过查询路由的params下的参数来获取关键词{ path: '/search_result/:keywords', component: SearchResult }\r\n      // 这里不能用query哦，因为不是查询字符串传参\r\n      q: this.$route.params.keywords\r\n    })\r\n    // console.log(res)\r\n    // 把获取到的数据保存到data中\r\n    this.searchResult = res.data.data.results\r\n  },\r\n  methods: {\r\n    // 搜索结果列表上拉加载的事件\r\n    async onLoad() {\r\n      // 用到list组件，一开始一定要判断一下数组里有值没有，有值才能去发请求，没有值就不能发\r\n      this.page++\r\n      if (this.searchResult.length > 0) {\r\n        // 才能去发请求\r\n        const res = await getSearchResultAPI({\r\n          page: this.page,\r\n          q: this.$route.params.keywords\r\n        })\r\n        // 在合并之前你要先判断返回有值没有啊，没有值你合并干嘛呢？\r\n        if (res.data.data.results.length === 0) {\r\n          this.finished = true\r\n        } else {\r\n          this.searchResult = [...this.searchResult, ...res.data.data.results]\r\n          this.loading = false\r\n        }\r\n      }\r\n    },\r\n    // 点击跳转到详情\r\n    skipToDetailFn(id) {\r\n      // console.log(111)\r\n      this.$router.push(`/article_detail?art_id=${id}`)\r\n    }\r\n  },\r\n  components: {\r\n    ArticleItem\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-result-container {\r\n  padding-top: 46px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SerachResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SerachResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SerachResult.vue?vue&type=template&id=25e623ea&scoped=true&\"\nimport script from \"./SerachResult.vue?vue&type=script&lang=js&\"\nexport * from \"./SerachResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SerachResult.vue?vue&type=style&index=0&id=25e623ea&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25e623ea\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","go","finished","onLoad","model","value","callback","$$v","loading","expression","_l","item","key","art_id","nativeOn","skipToDetailFn","staticRenderFns","name","data","page","searchResult","async","res","q","$route","params","keywords","results","methods","length","id","push","components","ArticleItem","component"],"sourceRoot":""}