{"version":3,"file":"js/546.78edcb93.js","mappings":"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","sources":["webpack://heimatoutiao/./src/components/home/ArticleDetail.vue?790e","webpack://heimatoutiao/./src/components/home/Comment.vue?34c5","webpack://heimatoutiao/src/components/home/Comment.vue","webpack://heimatoutiao/./src/components/home/Comment.vue?71dd","webpack://heimatoutiao/./src/components/home/Comment.vue","webpack://heimatoutiao/src/components/home/ArticleDetail.vue","webpack://heimatoutiao/./src/components/home/ArticleDetail.vue?b919","webpack://heimatoutiao/./src/components/home/ArticleDetail.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"fixed\":\"\",\"title\":\"文章详情\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.back()}}}),(Object.keys(_vm.articleDetailList).length === 0)?_c('van-loading',{staticClass:\"loading\",attrs:{\"color\":\"#1989fa\"}},[_vm._v(\"加载中\")]):_c('div',[_c('div',{staticClass:\"article-container\"},[_c('h1',{staticClass:\"art-title\"},[_vm._v(_vm._s(_vm.articleDetailList.title))]),_c('van-cell',{attrs:{\"center\":\"\",\"title\":_vm.articleDetailList.aut_name,\"label\":_vm.articleDetailList.pubdate},scopedSlots:_vm._u([{key:\"icon\",fn:function(){return [_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.articleDetailList.aut_photo,\"alt\":\"\"}})]},proxy:true},{key:\"default\",fn:function(){return [_c('div',[(_vm.articleDetailList.is_followed === true)?_c('van-button',{attrs:{\"type\":\"info\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.attention(true)}}},[_vm._v(\"已关注\")]):_c('van-button',{attrs:{\"icon\":\"plus\",\"type\":\"info\",\"size\":\"mini\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.attention(false)}}},[_vm._v(\"关注\")])],1)]},proxy:true}])}),_c('van-divider'),_c('div',{staticClass:\"art-content\",domProps:{\"innerHTML\":_vm._s(_vm.articleDetailList.content)}}),_c('van-divider',[_vm._v(\"End\")]),_c('div',{staticClass:\"like-box\"},[(_vm.articleDetailList.attitude === 1)?_c('van-button',{attrs:{\"icon\":\"good-job\",\"type\":\"danger\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.loveFn(true)}}},[_vm._v(\"已点赞\")]):(_vm.articleDetailList.attitude === -1)?_c('van-button',{attrs:{\"icon\":\"good-job-o\",\"type\":\"danger\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.loveFn(false)}}},[_vm._v(\"点赞\")]):_vm._e()],1)],1),_c('comment')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"cmt-list\",class:{ 'cmt-container-1': !_vm.isShowCommentInputVisible, 'cmt-container-2': _vm.isShowCommentInputVisible }},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多评论辣，快去发表评论吧\",\"immediate-check\":false},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.commentList),function(item){return _c('div',{key:item.com_id,staticClass:\"cmt-item\"},[_c('div',{staticClass:\"cmt-header\"},[_c('div',{staticClass:\"cmt-header-left\"},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":item.aut_photo,\"alt\":\"\"}}),_c('span',{staticClass:\"uname\"},[_vm._v(_vm._s(item.aut_name))])]),_c('div',{staticClass:\"cmt-header-right\"},[(item.is_liking === true)?_c('van-icon',{attrs:{\"name\":\"like\",\"size\":\"16\",\"color\":\"red\"},on:{\"click\":function($event){return _vm.likeComment(true, item)}}}):_c('van-icon',{attrs:{\"name\":\"like-o\",\"size\":\"16\",\"color\":\"gray\"},on:{\"click\":function($event){return _vm.likeComment(false, item)}}})],1)]),_c('div',{staticClass:\"cmt-body\"},[_vm._v(_vm._s(item.content))]),_c('div',{staticClass:\"cmt-footer\"},[_vm._v(_vm._s(item.pubdate))])])}),0)],1),(_vm.isShowCommentInputVisible === false)?_c('div',{staticClass:\"add-cmt-box van-hairline--top\"},[_c('van-icon',{attrs:{\"name\":\"arrow-left\",\"size\":\"0.48rem\"},on:{\"click\":function($event){return _vm.$router.back()}}}),_c('div',{staticClass:\"ipt-cmt-div\",on:{\"click\":function($event){_vm.isShowCommentInputVisible = true}}},[_vm._v(\"发表评论\")]),_c('div',{staticClass:\"icon-box\"},[_c('van-badge',{attrs:{\"content\":_vm.totalComment === 0 ? '' : _vm.totalComment,\"max\":\"99\"}},[_c('van-icon',{attrs:{\"name\":\"comment-o\",\"size\":\"0.53333334rem\"},on:{\"click\":_vm.scrollToComment}})],1),_c('span',[(_vm.isStar === false)?_c('van-icon',{attrs:{\"name\":\"star-o\",\"size\":\"0.53333334rem\"},on:{\"click\":_vm.starFn}}):_c('van-icon',{attrs:{\"name\":\"star\",\"size\":\"0.53333334rem\",\"color\":\"red\"},on:{\"click\":_vm.starFn}})],1),_c('van-icon',{attrs:{\"name\":\"share-o\",\"size\":\"0.53333334rem\"},on:{\"click\":_vm.showShareFn}})],1)],1):_c('div',{staticClass:\"cmt-box van-hairline--top\"},[_c('textarea',{directives:[{name:\"fofo\",rawName:\"v-fofo\"},{name:\"model\",rawName:\"v-model.trim\",value:(_vm.commentContent),expression:\"commentContent\",modifiers:{\"trim\":true}}],attrs:{\"placeholder\":\"请发表一个友善的评论哟\"},domProps:{\"value\":(_vm.commentContent)},on:{\"blur\":[_vm.blurFn,function($event){return _vm.$forceUpdate()}],\"input\":function($event){if($event.target.composing){ return; }_vm.commentContent=$event.target.value.trim()}}}),_c('van-button',{attrs:{\"type\":\"default\",\"disabled\":_vm.commentContent.length === 0},on:{\"click\":_vm.sendCommentFn}},[_vm._v(\"发布\")])],1),_c('van-share-sheet',{attrs:{\"title\":\"立即分享给好友\",\"options\":_vm.options},model:{value:(_vm.showShare),callback:function ($$v) {_vm.showShare=$$v},expression:\"showShare\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 评论列表 -->\r\n    <!-- 动态class用来根据不同的情况切换不同的类名，格式别忘了 -->\r\n    <!-- 因为只有两种状态，所以只需要两种类名来切换即可 -->\r\n    <div class=\"cmt-list\" :class=\"{ 'cmt-container-1': !isShowCommentInputVisible, 'cmt-container-2': isShowCommentInputVisible }\">\r\n      <!-- 这个list组件是用来包裹每一项的 -->\r\n      <van-list v-model=\"loading\" :finished=\"finished\" finished-text=\"没有更多评论辣，快去发表评论吧\" @load=\"onLoad\" :immediate-check=\"false\">\r\n        <!-- 评论的 Item 项 -->\r\n        <div class=\"cmt-item\" v-for=\"item in commentList\" :key=\"item.com_id\">\r\n          <!-- 头部区域 -->\r\n          <div class=\"cmt-header\">\r\n            <!-- 头部左侧 -->\r\n            <div class=\"cmt-header-left\">\r\n              <img :src=\"item.aut_photo\" alt=\"\" class=\"avatar\" />\r\n              <span class=\"uname\">{{ item.aut_name }}</span>\r\n            </div>\r\n            <!-- 头部右侧 -->\r\n            <div class=\"cmt-header-right\">\r\n              <van-icon name=\"like\" size=\"16\" color=\"red\" v-if=\"item.is_liking === true\" @click=\"likeComment(true, item)\" />\r\n              <van-icon name=\"like-o\" size=\"16\" color=\"gray\" v-else @click=\"likeComment(false, item)\" />\r\n            </div>\r\n          </div>\r\n          <!-- 主体区域 -->\r\n          <div class=\"cmt-body\">{{ item.content }}</div>\r\n          <!-- 尾部区域 -->\r\n          <div class=\"cmt-footer\">{{ item.pubdate }}</div>\r\n        </div>\r\n      </van-list>\r\n    </div>\r\n\r\n    <!-- 底部添加评论区域 - 1 -->\r\n    <div class=\"add-cmt-box van-hairline--top\" v-if=\"isShowCommentInputVisible === false\">\r\n      <van-icon name=\"arrow-left\" size=\"0.48rem\" @click=\"$router.back()\" />\r\n      <div class=\"ipt-cmt-div\" @click=\"isShowCommentInputVisible = true\">发表评论</div>\r\n      <div class=\"icon-box\">\r\n        <!-- 需求:1 评论总数为0的时候不显示图标;  2 评论总数大于99时显示99+ -->\r\n        <van-badge :content=\"totalComment === 0 ? '' : totalComment\" max=\"99\">\r\n          <van-icon name=\"comment-o\" size=\"0.53333334rem\" @click=\"scrollToComment\" />\r\n        </van-badge>\r\n        <!-- 收藏文章 -->\r\n        <span>\r\n          <van-icon name=\"star-o\" size=\"0.53333334rem\" v-if=\"isStar === false\" @click=\"starFn\" />\r\n          <van-icon name=\"star\" size=\"0.53333334rem\" v-else color=\"red\" @click=\"starFn\" />\r\n        </span>\r\n        <van-icon name=\"share-o\" size=\"0.53333334rem\" @click=\"showShareFn\" />\r\n      </div>\r\n    </div>\r\n    <!-- 底部添加评论区域 - 2 -->\r\n    <div class=\"cmt-box van-hairline--top\" v-else>\r\n      <textarea placeholder=\"请发表一个友善的评论哟\" v-fofo @blur=\"blurFn\" v-model.trim=\"commentContent\"></textarea>\r\n      <van-button type=\"default\" :disabled=\"commentContent.length === 0\" @click=\"sendCommentFn\">发布</van-button>\r\n    </div>\r\n\r\n    <!-- 分享组件 -->\r\n    <van-share-sheet v-model=\"showShare\" title=\"立即分享给好友\" :options=\"options\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getCommentListAPI, likeCommentAPI, unlikeCommentAPI, sendCommentAPI, collectArticleAPI } from '@/api/api.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 获取到的评论列表，接下来去循环列表数据去铺设数据\r\n      commentList: [],\r\n      // 控制评论分页偏移量的\r\n      lastId: null,\r\n      // 控制发布评论的切换\r\n      isShowCommentInputVisible: false,\r\n      // 获取到的评论总数\r\n      totalComment: 0,\r\n      // 输入的评论内容\r\n      commentContent: '',\r\n      // 控制加载状态的\r\n      loading: false,\r\n      // 监控到没有list数据了就会转为true\r\n      finished: false,\r\n      // 控制是否对文章表示喜欢\r\n      isStar: false,\r\n      // 控制分享面板的显示与隐藏\r\n      showShare: false,\r\n      // 分享到其他平台\r\n      options: [\r\n        [\r\n          { name: '微信', icon: 'wechat' },\r\n          { name: '朋友圈', icon: 'wechat-moments' },\r\n          { name: '微博', icon: 'weibo' },\r\n          { name: 'QQ', icon: 'qq' }\r\n        ],\r\n        [\r\n          { name: '复制链接', icon: 'link' },\r\n          { name: '分享海报', icon: 'poster' },\r\n          { name: '二维码', icon: 'qrcode' },\r\n          { name: '小程序码', icon: 'weapp-qrcode' }\r\n        ]\r\n      ]\r\n    }\r\n  },\r\n  async created() {\r\n    // 一创建就获取评论数据\r\n    const res = await getCommentListAPI({\r\n      // 通过查询字符串的方式获取到文章的id\r\n      art_id: this.$route.query.art_id\r\n    })\r\n    // console.log(res)\r\n    this.commentList = res.data.data.results\r\n    this.totalComment = res.data.data.total_count\r\n    this.lastId = res.data.data.last_id\r\n    // 需求：在刚创建评论列表的时候，如果没有评论数据，就显示没有更多评论了\r\n    if (this.totalComment === 0) {\r\n      this.finished = true\r\n    }\r\n  },\r\n  methods: {\r\n    // 评论的点赞与取消点赞\r\n    // 因为在data里面没有item，所以必须要在点击事件里面手动传递一个item进来\r\n    async likeComment(bool, item) {\r\n      if (bool === true) {\r\n        // 取消点赞\r\n        item.is_liking = false\r\n        await unlikeCommentAPI({\r\n          com_id: item.com_id\r\n        })\r\n      } else {\r\n        //  点赞\r\n        item.is_liking = true\r\n        await likeCommentAPI({\r\n          com_id: item.com_id\r\n        })\r\n      }\r\n    },\r\n    // 点击评论的图标，自动滚动到评论列表\r\n    scrollToComment() {\r\n      // 总结：动画有三种方法：\r\n      // 1 css的动画或者过渡  2 原生js利用定时器来做  3利用 原生标签.scrollIntoview()\r\n\r\n      // 因为js代码是在html和css创建完成之后才会执行，所以通过document向下获取类名是可以的，不一定非要在同一个组件内才能获取到\r\n      // const articleHeight = document.querySelector('.article-container').scrollHeight\r\n      // console.log(articleHeight)\r\n      // window.scrollTo(0, articleHeight - 46)\r\n\r\n      // 比较方便的方法(既能滚动也能带动画)\r\n      // 原生标签.scrollIntoview()，让原生的标签滚动到屏幕的最上面l/为何选择like-box不选择第一条评论，因为头部导航会挡住\r\n      // 注意:有的人的电脑不支持这个方法，没有滑动的效果-〉只能用原生Js写(兼容性好)\r\n      document.querySelector('.like-box').scrollIntoView({\r\n        behavior: 'smooth'\r\n      })\r\n    },\r\n    // 点击发布按钮，添加评论\r\n    async sendCommentFn() {\r\n      // console.log(this.commentContent)\r\n      // 问题：这里点击发布，打印不出来数据\r\n      // 原因：高的评论容器-在页面点击发布一瞬间，输入框失去了焦点，被v-if和v-else移除了整个标签导致点击事件没来得及执行\r\n      // 解决：失去焦点时,变量值，在最后再执行,即把失去焦点这个事件通过一个定时器把它变成一个异步事件，就可以延迟销毁\r\n      const res = await sendCommentAPI({\r\n        id: this.$route.query.art_id,\r\n        content: this.commentContent\r\n      })\r\n      // 调用发布评论的接口后会返回一个新对象，这个对象里就有刚刚新增的数据结构\r\n      // console.log(res)\r\n      // 把新增的这个评论数据unshift到评论列表的最前面，不能用push，要用unshift\r\n      this.commentList.unshift(res.data.data.new_obj)\r\n      // 因为我们的新增评论是追加上去的，不是刷新得到的，所以在新增评论后，评论总数不会显示变化，所以需要手动添加\r\n      this.totalComment++\r\n      // 需求：一发表新的评论后，就自动滚动到新增的评论处\r\n      this.scrollToComment()\r\n      // 清空textarea绑定的数据\r\n      this.commentContent = ''\r\n    },\r\n    // 失去焦点时切换评论容器\r\n    blurFn() {\r\n      setTimeout(() => {\r\n        this.isShowCommentInputVisible = false\r\n      }, 0)\r\n    },\r\n    // 上拉加载时默认触发的事件\r\n    // list组件默认一开始就会触发load事件，所以不要让他一开始就触发事件，需要在组件标签上添加属性immediate-check,其实加了这个属性就不需要判断this.commentList.length > 0了\r\n    async onLoad() {\r\n      // 判断的原因就是不希望一初始化就立即执行滚动检查\r\n      if (this.commentList.length > 0) {\r\n        const res = await getCommentListAPI({\r\n          art_id: this.$route.query.art_id,\r\n          offset: this.lastId\r\n        })\r\n        console.log(res)\r\n        this.commentList = [...this.commentList, ...res.data.data.results]\r\n        this.totalComment = res.data.data.total_count\r\n        this.lastId = res.data.data.last_id\r\n        if (this.lastId === null) {\r\n          this.finished = true\r\n        }\r\n        this.loading = false\r\n      } else {\r\n        this.loading = false\r\n      }\r\n    },\r\n    // 控制分享面板的显示与隐藏\r\n    showShareFn() {\r\n      this.showShare = true\r\n    },\r\n    // 点击喜欢，图标变红\r\n    async starFn() {\r\n      // console.log(111)\r\n      this.isStar = !this.isStar\r\n      const res = await collectArticleAPI({\r\n        art_id: this.$route.query.art_id\r\n      })\r\n      console.log(res)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.cmt-list {\r\n  padding: 10px;\r\n  .cmt-item {\r\n    padding: 15px 0;\r\n    + .cmt-item {\r\n      border-top: 1px solid #f8f8f8;\r\n    }\r\n    .cmt-header {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: space-between;\r\n      .cmt-header-left {\r\n        display: flex;\r\n        align-items: center;\r\n        .avatar {\r\n          width: 40px;\r\n          height: 40px;\r\n          background-color: #f8f8f8;\r\n          border-radius: 50%;\r\n          margin-right: 15px;\r\n        }\r\n        .uname {\r\n          font-size: 12px;\r\n        }\r\n      }\r\n    }\r\n    .cmt-body {\r\n      font-size: 14px;\r\n      line-height: 28px;\r\n      text-indent: 2em;\r\n      margin-top: 6px;\r\n      word-break: break-all;\r\n    }\r\n    .cmt-footer {\r\n      font-size: 12px;\r\n      color: gray;\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n}\r\n// 控制评论底部距离发布评论的距离\r\n.cmt-container-1 {\r\n  padding-bottom: 40px;\r\n}\r\n.cmt-container-2 {\r\n  padding-bottom: 80px;\r\n}\r\n\r\n/*美化 - 文章详情 - 底部的评论页面 */\r\n// 外层容器\r\n.art-cmt-container-1 {\r\n  padding-bottom: 46px;\r\n}\r\n.art-cmt-container-2 {\r\n  padding-bottom: 80px;\r\n}\r\n// 对发布评论的组件进行美化\r\n// 发布评论的盒子 - 1\r\n.add-cmt-box {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  background-color: white;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  height: 46px;\r\n  line-height: 46px;\r\n  padding-left: 10px;\r\n  .ipt-cmt-div {\r\n    flex: 1;\r\n    border: 1px solid #efefef;\r\n    border-radius: 15px;\r\n    height: 30px;\r\n    font-size: 12px;\r\n    line-height: 30px;\r\n    padding-left: 15px;\r\n    margin-left: 10px;\r\n    background-color: #f8f8f8;\r\n  }\r\n  .icon-box {\r\n    width: 40%;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    line-height: 0;\r\n  }\r\n}\r\n\r\n.child {\r\n  width: 20px;\r\n  height: 20px;\r\n  background: #f2f3f5;\r\n}\r\n\r\n// 发布评论的盒子 - 2\r\n.cmt-box {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 80px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  font-size: 12px;\r\n  padding-left: 10px;\r\n  box-sizing: border-box;\r\n  background-color: white;\r\n  textarea {\r\n    flex: 1;\r\n    height: 66%;\r\n    border: 1px solid #efefef;\r\n    background-color: #f8f8f8;\r\n    resize: none;\r\n    border-radius: 6px;\r\n    padding: 5px;\r\n  }\r\n  .van-button {\r\n    height: 100%;\r\n    border: none;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Comment.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Comment.vue?vue&type=template&id=ef122136&scoped=true&\"\nimport script from \"./Comment.vue?vue&type=script&lang=js&\"\nexport * from \"./Comment.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Comment.vue?vue&type=style&index=0&id=ef122136&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ef122136\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div>\r\n    <!-- Header 区域 -->\r\n    <van-nav-bar fixed title=\"文章详情\" left-arrow @click-left=\"$router.back()\" />\r\n    <!-- 文章加载状态 -->\r\n    <van-loading class=\"loading\" color=\"#1989fa\" v-if=\"Object.keys(articleDetailList).length === 0\">加载中</van-loading>\r\n    <!-- 文章信息区域 -->\r\n    <div v-else>\r\n      <div class=\"article-container\">\r\n        <!-- 文章标题 -->\r\n        <h1 class=\"art-title\">{{ articleDetailList.title }}</h1>\r\n\r\n        <!-- 用户信息 -->\r\n        <van-cell center :title=\"articleDetailList.aut_name\" :label=\"articleDetailList.pubdate\">\r\n          <template #icon>\r\n            <img :src=\"articleDetailList.aut_photo\" alt=\"\" class=\"avatar\" />\r\n          </template>\r\n          <template #default>\r\n            <div>\r\n              <van-button type=\"info\" size=\"mini\" v-if=\"articleDetailList.is_followed === true\" @click=\"attention(true)\">已关注</van-button>\r\n              <van-button icon=\"plus\" type=\"info\" size=\"mini\" plain v-else @click=\"attention(false)\">关注</van-button>\r\n            </div>\r\n          </template>\r\n        </van-cell>\r\n\r\n        <!-- 分割线 -->\r\n        <van-divider></van-divider>\r\n\r\n        <!-- 文章内容 -->\r\n        <div class=\"art-content\" v-html=\"articleDetailList.content\"></div>\r\n\r\n        <!-- 分割线 -->\r\n        <van-divider>End</van-divider>\r\n\r\n        <!-- 点赞评论 -->\r\n        <div class=\"like-box\">\r\n          <van-button icon=\"good-job\" type=\"danger\" size=\"small\" v-if=\"articleDetailList.attitude === 1\" @click=\"loveFn(true)\">已点赞</van-button>\r\n          <van-button icon=\"good-job-o\" type=\"danger\" plain size=\"small\" v-else-if=\"articleDetailList.attitude === -1\" @click=\"loveFn(false)\">点赞</van-button>\r\n        </div>\r\n      </div>\r\n      <!-- 文章评论 -->\r\n      <comment></comment>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getArticleDetailAPI, attentionAuthor, unAttentionAuthor, loveAPI, unLoveAPI } from '@/api/api.js'\r\nimport Comment from '@/components/home/Comment.vue'\r\nexport default {\r\n  name: 'ArticleDetail',\r\n  data() {\r\n    return {\r\n      // 这是个对象，不是数组\r\n      articleDetailList: {}\r\n    }\r\n  },\r\n  async created() {\r\n    // 获取文章详情\r\n    // 文章id从哪里来？从查询哈希字符串的方式\r\n    const res = await getArticleDetailAPI({\r\n      article_id: this.$route.query.art_id\r\n    })\r\n    // console.log(res)\r\n    this.articleDetailList = res.data.data\r\n  },\r\n  methods: {\r\n    // 关注和取关作者的函数\r\n    async attention(bool) {\r\n      if (bool === true) {\r\n        this.articleDetailList.is_followed = false\r\n        // 取关接口\r\n        await unAttentionAuthor({\r\n          aut_id: this.articleDetailList.aut_id\r\n        })\r\n        // console.log(res)\r\n      } else {\r\n        this.articleDetailList.is_followed = true\r\n        // 关注接口\r\n        await attentionAuthor({\r\n          aut_id: this.articleDetailList.aut_id\r\n        })\r\n        // console.log(res1)\r\n      }\r\n    },\r\n    // 点赞，取消点赞\r\n    async loveFn(bool) {\r\n      if (bool === true) {\r\n        // 取消点赞\r\n        this.articleDetailList.attitude = -1\r\n        const res1 = await unLoveAPI({\r\n          art_id: this.$route.query.art_id\r\n        })\r\n        console.log(res1)\r\n      } else {\r\n        // 点赞\r\n        this.articleDetailList.attitude = 1\r\n        const res2 = await loveAPI({\r\n          art_id: this.$route.query.art_id\r\n        })\r\n        console.log(res2)\r\n      }\r\n    }\r\n  },\r\n  components: {\r\n    Comment\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.article-container {\r\n  padding: 56px 10px 10px 10px;\r\n  // margin-top: 46px;\r\n}\r\n.art-title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  margin: 10px 0;\r\n}\r\n\r\n.art-content {\r\n  font-size: 12px;\r\n  line-height: 24px;\r\n  width: 100%;\r\n  overflow-x: scroll;\r\n  word-break: break-all;\r\n  /deep/ img {\r\n    width: 100%;\r\n  }\r\n  /deep/ pre {\r\n    white-space: pre-wrap;\r\n    word-wrap: break-word;\r\n  }\r\n}\r\n\r\n.van-cell {\r\n  padding: 5px 0;\r\n  &::after {\r\n    display: none;\r\n  }\r\n}\r\n\r\n.avatar {\r\n  width: 60px;\r\n  height: 60px;\r\n  border-radius: 50%;\r\n  background-color: #f8f8f8;\r\n  margin-right: 5px;\r\n  border: none;\r\n}\r\n\r\n.like-box {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n.loading {\r\n  text-align: center;\r\n  padding-top: 46px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ArticleDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ArticleDetail.vue?vue&type=template&id=94444fba&scoped=true&\"\nimport script from \"./ArticleDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./ArticleDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ArticleDetail.vue?vue&type=style&index=0&id=94444fba&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"94444fba\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","$event","$router","back","Object","keys","articleDetailList","length","staticClass","_v","_s","title","aut_name","pubdate","scopedSlots","_u","key","fn","aut_photo","proxy","is_followed","attention","domProps","content","attitude","loveFn","_e","staticRenderFns","class","isShowCommentInputVisible","finished","onLoad","model","value","callback","$$v","loading","expression","_l","item","com_id","is_liking","likeComment","totalComment","scrollToComment","isStar","starFn","showShareFn","directives","name","rawName","modifiers","blurFn","$forceUpdate","target","composing","commentContent","trim","sendCommentFn","options","showShare","data","commentList","lastId","icon","async","res","art_id","$route","query","results","total_count","last_id","methods","bool","document","querySelector","scrollIntoView","behavior","id","unshift","new_obj","setTimeout","offset","console","log","component","article_id","aut_id","res1","res2","components","Comment"],"sourceRoot":""}