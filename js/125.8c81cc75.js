"use strict";(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[125],{6388:function(t,s,e){e.r(s),e.d(s,{default:function(){return u}});var r=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"search-header"},[e("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(s){return t.$router.back()}}}),e("van-search",{directives:[{name:"fofo",rawName:"v-fofo"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.searchWordChangeFn,search:t.searchInputFn},model:{value:t.searchWord,callback:function(s){t.searchWord="string"===typeof s?s.trim():s},expression:"searchWord"}})],1),0!==t.searchWord.length?e("div",{staticClass:"sugg-list"},t._l(t.suggestList,(function(s,r){return e("div",{key:r,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.hightlightKeywordsFn(s,t.searchWord))},on:{click:function(e){return t.searchSuggestFn(s)}}})})),0):e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.clearHistoryFn}})]},proxy:!0}])}),e("div",{staticClass:"history-list"},t._l(t.history,(function(s,r){return e("span",{key:r,staticClass:"history-item",on:{click:function(e){return t.searchHistoryFn(s)}}},[t._v(t._s(s))])})),0)],1)])},i=[],a=e(5394),n={name:"Search",data(){return{searchWord:"",timer:null,suggestList:[],history:JSON.parse(localStorage.getItem("his"))||[]}},methods:{searchWordChangeFn(){clearTimeout(this.timer),0===this.searchWord.length?this.suggestList=[]:this.timer=setTimeout((async()=>{if(0===this.searchWord.length)return;const t=await(0,a.Yy)({keywords:this.searchWord});this.suggestList=t.data.data.options}),500)},hightlightKeywordsFn(t,s){if(null===t)return;const e=new RegExp(s,"ig");return t.replace(e,(t=>`<span style="color: red;">${t}</span>`))},searchInputFn(){this.searchWord.length>0&&(this.history.unshift(this.searchWord),setTimeout((()=>{this.$router.push(`/search_result/${this.searchWord}`)}),0))},searchSuggestFn(t){this.history.unshift(t),setTimeout((()=>{this.$router.push(`/search_result/${this.searchWord}`)}),0)},searchHistoryFn(t){this.$router.push(`/search_result/${t}`)},clearHistoryFn(){this.history=[]}},watch:{history:{deep:!0,handler(){const t=new Set(this.history),s=Array.from(t);localStorage.setItem("his",JSON.stringify(s))}}}},o=n,h=e(1001),c=(0,h.Z)(o,r,i,!1,null,"6c69fd3a",null),u=c.exports}}]);
//# sourceMappingURL=125.8c81cc75.js.map