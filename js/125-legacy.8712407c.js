(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[125],{6388:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return l}});var s=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",[e("div",{staticClass:"search-header"},[e("van-icon",{staticClass:"goback",attrs:{name:"arrow-left",color:"white",size:"0.48rem"},on:{click:function(r){return t.$router.back()}}}),e("van-search",{directives:[{name:"fofo",rawName:"v-fofo"}],attrs:{placeholder:"请输入搜索关键词",background:"#007BFF",shape:"round"},on:{input:t.searchWordChangeFn,search:t.searchInputFn},model:{value:t.searchWord,callback:function(r){t.searchWord="string"===typeof r?r.trim():r},expression:"searchWord"}})],1),0!==t.searchWord.length?e("div",{staticClass:"sugg-list"},t._l(t.suggestList,(function(r,s){return e("div",{key:s,staticClass:"sugg-item",domProps:{innerHTML:t._s(t.hightlightKeywordsFn(r,t.searchWord))},on:{click:function(e){return t.searchSuggestFn(r)}}})})),0):e("div",{staticClass:"search-history"},[e("van-cell",{attrs:{title:"搜索历史"},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{staticClass:"search-icon",attrs:{name:"delete"},on:{click:t.clearHistoryFn}})]},proxy:!0}])}),e("div",{staticClass:"history-list"},t._l(t.history,(function(r,s){return e("span",{key:s,staticClass:"history-item",on:{click:function(e){return t.searchHistoryFn(r)}}},[t._v(t._s(r))])})),0)],1)])},n=[],a=e(6198),i=(e(4603),e(8450),e(4916),e(8386),e(9714),e(5306),e(1539),e(189),e(8783),e(3948),e(1038),e(8862),e(8975),e(5394)),o={name:"Search",data:function(){return{searchWord:"",timer:null,suggestList:[],history:JSON.parse(localStorage.getItem("his"))||[]}},methods:{searchWordChangeFn:function(){var t=this;clearTimeout(this.timer),0===this.searchWord.length?this.suggestList=[]:this.timer=setTimeout((0,a.Z)(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==t.searchWord.length){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,(0,i.Yy)({keywords:t.searchWord});case 4:e=r.sent,t.suggestList=e.data.data.options;case 6:case"end":return r.stop()}}),r)}))),500)},hightlightKeywordsFn:function(t,r){if(null!==t){var e=new RegExp(r,"ig");return t.replace(e,(function(t){return'<span style="color: red;">'.concat(t,"</span>")}))}},searchInputFn:function(){var t=this;this.searchWord.length>0&&(this.history.unshift(this.searchWord),setTimeout((function(){t.$router.push("/search_result/".concat(t.searchWord))}),0))},searchSuggestFn:function(t){var r=this;this.history.unshift(t),setTimeout((function(){r.$router.push("/search_result/".concat(r.searchWord))}),0)},searchHistoryFn:function(t){this.$router.push("/search_result/".concat(t))},clearHistoryFn:function(){this.history=[]}},watch:{history:{deep:!0,handler:function(){var t=new Set(this.history),r=Array.from(t);localStorage.setItem("his",JSON.stringify(r))}}}},c=o,h=e(1001),u=(0,h.Z)(c,s,n,!1,null,"6c69fd3a",null),l=u.exports},8457:function(t,r,e){"use strict";var s=e(7854),n=e(9974),a=e(6916),i=e(7908),o=e(3411),c=e(7659),h=e(4411),u=e(6244),l=e(6135),f=e(8554),d=e(1246),g=s.Array;t.exports=function(t){var r=i(t),e=h(this),s=arguments.length,v=s>1?arguments[1]:void 0,p=void 0!==v;p&&(v=n(v,s>2?arguments[2]:void 0));var m,y,k,w,W,F,C=d(r),_=0;if(!C||this==g&&c(C))for(m=u(r),y=e?new this(m):g(m);m>_;_++)F=p?v(r[_],_):r[_],l(y,_,F);else for(w=f(r,C),W=w.next,y=e?new this:[];!(k=a(W,w)).done;_++)F=p?o(w,v,[k.value,_],!0):k.value,l(y,_,F);return y.length=_,y}},3411:function(t,r,e){var s=e(9670),n=e(9212);t.exports=function(t,r,e,a){try{return a?r(s(e)[0],e[1]):r(e)}catch(i){n(t,"throw",i)}}},1038:function(t,r,e){var s=e(2109),n=e(8457),a=e(7072),i=!a((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:i},{from:n})}}]);
//# sourceMappingURL=125-legacy.8712407c.js.map