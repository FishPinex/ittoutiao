{"version":3,"file":"js/647-legacy.b467f48d.js","mappings":"oKAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,MAAQ,QAAQF,EAAG,MAAM,CAACA,EAAG,WAAW,CAACG,GAAG,CAAC,OAASP,EAAIQ,WAAW,CAACJ,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,SAAS,MAAQ,MAAM,YAAc,MAAM,MAAQ,CAAC,CAAEG,QAAS,gBAAiBC,QAAS,cAAe,SAAW,IAAIC,MAAM,CAACC,MAAOZ,EAAIa,SAAe,OAAEC,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIa,SAAU,SAAUE,IAAME,WAAW,qBAAqBb,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,WAAW,KAAO,OAAO,MAAQ,KAAK,YAAc,KAAK,MAAQ,CACtjB,CAAEY,UAAU,EAAMR,QAAS,SAC3B,CAAED,QAAS,UAAWC,QAAS,WAC/B,SAAW,IAAIC,MAAM,CAACC,MAAOZ,EAAIa,SAAa,KAAEC,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIa,SAAU,OAAQE,IAAME,WAAW,mBAAmBb,EAAG,MAAM,CAACe,YAAY,CAAC,OAAS,SAAS,CAACf,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,GAAG,KAAO,OAAO,cAAc,SAAS,QAAUN,EAAIoB,UAAU,eAAe,SAAS,eAAe,UAAU,SAAWpB,EAAIqB,YAAYC,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIQ,SAASgB,MAAM,KAAMC,cAAc,CAACzB,EAAI0B,GAAG,SAAS,IAAI,IAAI,IAAI,IACjeC,EAAkB,G,sEC+BtB,GACEC,KADF,WAEI,MAAO,CAELf,SAAU,CACRgB,OAAQ,GACRC,KAAM,IAGRV,WAAW,EAEXC,YAAY,IAGhBU,QAAS,CAEP,SAFJ,WAEA,6JACA,eACA,gBAFA,mBAIAC,EAAAA,EAAAA,IAAAA,EAAAA,UAJA,OAIAC,EAJA,QAOA,QAAAC,KAAAA,UAAAxB,QAAAA,OAAAyB,SAAAA,OAIAC,EAAAA,EAAAA,IAAAA,EAAAA,KAAAA,KAAAA,QAGAC,EAAAA,EAAAA,IAAAA,gBAAAA,EAAAA,KAAAA,KAAAA,eAGA,gBAAAC,KAAAA,iBAjBA,sDAmBA,QAAAJ,KAAAA,SAAAxB,QAAAA,OAAAyB,SAAAA,MAnBA,QAqBA,eACA,gBAtBA,+DCnD0Q,I,UCQtQI,GAAY,OACd,EACAxC,EACA4B,GACA,EACA,KACA,WACA,MAIF,EAAeY,EAAiB","sources":["webpack://heimatoutiao/./src/components/login/Login.vue?d5b0","webpack://heimatoutiao/src/components/login/Login.vue","webpack://heimatoutiao/./src/components/login/Login.vue?3267","webpack://heimatoutiao/./src/components/login/Login.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{attrs:{\"title\":\"登录\"}}),_c('div',[_c('van-form',{on:{\"submit\":_vm.onSubmit}},[_c('van-field',{attrs:{\"name\":\"mobile\",\"label\":\"手机号\",\"placeholder\":\"手机号\",\"rules\":[{ pattern: /^1[3-9]\\d{9}$/, message: '请填写正确的手机号' }],\"required\":\"\"},model:{value:(_vm.userInfo.mobile),callback:function ($$v) {_vm.$set(_vm.userInfo, \"mobile\", $$v)},expression:\"userInfo.mobile\"}}),_c('van-field',{attrs:{\"type\":\"password\",\"name\":\"code\",\"label\":\"密码\",\"placeholder\":\"密码\",\"rules\":[\n          { required: true, message: '请填写密码' },\n          { pattern: /^\\d{6}$/, message: '验证码为6位' }\n        ],\"required\":\"\"},model:{value:(_vm.userInfo.code),callback:function ($$v) {_vm.$set(_vm.userInfo, \"code\", $$v)},expression:\"userInfo.code\"}}),_c('div',{staticStyle:{\"margin\":\"16px\"}},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"type\":\"info\",\"native-type\":\"submit\",\"loading\":_vm.isLoading,\"loading-text\":\"登录中...\",\"loading-type\":\"spinner\",\"disabled\":_vm.isDisabled},nativeOn:{\"click\":function($event){return _vm.onSubmit.apply(null, arguments)}}},[_vm._v(\"登录\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 导航条 -->\r\n    <van-nav-bar title=\"登录\" />\r\n\r\n    <!-- 表单 -->\r\n    <div>\r\n      <van-form @submit=\"onSubmit\">\r\n        <van-field v-model=\"userInfo.mobile\" name=\"mobile\" label=\"手机号\" placeholder=\"手机号\" :rules=\"[{ pattern: /^1[3-9]\\d{9}$/, message: '请填写正确的手机号' }]\" required />\r\n        <van-field\r\n          v-model=\"userInfo.code\"\r\n          type=\"password\"\r\n          name=\"code\"\r\n          label=\"密码\"\r\n          placeholder=\"密码\"\r\n          :rules=\"[\r\n            { required: true, message: '请填写密码' },\r\n            { pattern: /^\\d{6}$/, message: '验证码为6位' }\r\n          ]\"\r\n          required\r\n        />\r\n        <div style=\"margin: 16px\">\r\n          <van-button round block type=\"info\" native-type=\"submit\" :loading=\"isLoading\" loading-text=\"登录中...\" loading-type=\"spinner\" :disabled=\"isDisabled\" @click.native=\"onSubmit\">登录</van-button>\r\n        </div>\r\n      </van-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { loginAPI } from '@/api/api.js'\r\nimport { Notify } from 'vant'\r\n// 接口有问题\r\nimport { setToken } from '@/utils/token.js'\r\nimport { setStorage } from '@/utils/storage.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 要提交的登录信息\r\n      userInfo: {\r\n        mobile: '',\r\n        code: ''\r\n      },\r\n      // 控制登录按钮加载状态\r\n      isLoading: false,\r\n      // 控制按钮禁用来节流\r\n      isDisabled: false\r\n    }\r\n  },\r\n  methods: {\r\n    // 点击按钮，登录\r\n    async onSubmit() {\r\n      this.isLoading = true\r\n      this.isDisabled = true\r\n      try {\r\n        const res = await loginAPI(this.userInfo)\r\n        // 之前怎么都打印不出来数据，这次怎么就打印上了呢，难道是我要提交的登录信息的userInfo某一个地方没对上？\r\n        // 还有记住，如果你的网络请求单独封装成了request.js，就不需要去main.js打包了\r\n        Notify({ type: 'success', message: '登录成功', duration: 500 })\r\n        // 目前登录接口有问题啊，根本获取不到数据，另外无论验证码正确与否都会成功\r\n        // 登录成功之后一定要把token保存下来\r\n        // token的作用是用来保存用户登录信息，验证用户的身份\r\n        setToken(res.data.data.token)\r\n        // 为了让用户无感知更新token，需要将返回回来的更新token供本地使用\r\n        // localStorage.setItem('refresh_token', res.data.data.refresh_token)\r\n        setStorage('refresh_token', res.data.data.refresh_token)\r\n        // window.sessionStorage.setItem('token', res.data.data.token)\r\n        // 成功之后就利用编程式导航跳转到首页、必须写在最后，不然有可能保存不上token\r\n        this.$router.push({ path: '/layout/home' })\r\n      } catch (err) {\r\n        Notify({ type: 'danger', message: '登录失败', duration: 500 })\r\n      }\r\n      this.isLoading = false\r\n      this.isDisabled = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n// 修改样式有两种方法：\r\n// 1 类名覆盖（很少使用）\r\n// 2 定制\r\n// .van-nav-bar {\r\n//   background-color: rgb(36, 99, 226);\r\n//   // 之所以这里修改样式不生效，是因为加了scoped，scoped会生成属性选择器，会默认以属性选择器修改样式，则选不中组件内部的类名\r\n//   // 使用/deep/就可以将属性选择器加到前面，用后代选择器的方式去查找内部的类名\r\n//   /deep/ .van-nav-bar__title {\r\n//     color: #fff;\r\n//   }\r\n// }\r\n.van-button {\r\n  margin-top: 100px;\r\n}\r\n// input {\r\n//   box-shadow: inset 0 0 0 1000px white !important;\r\n// }\r\n\r\n// chrome浏览器默认会记录下登录成功的账号并以下拉list显示出来供用户选择，一旦你点了历史登录过的账号，该input表单就会有一个背景色，此方法可以覆盖背景色\r\n/deep/ .van-field__control {\r\n  // background-color: #fff;\r\n  box-shadow: inset 0 0 0 1000px white !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=6363773b&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=6363773b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6363773b\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","on","onSubmit","pattern","message","model","value","userInfo","callback","$$v","$set","expression","required","staticStyle","isLoading","isDisabled","nativeOn","$event","apply","arguments","_v","staticRenderFns","data","mobile","code","methods","loginAPI","res","type","duration","setToken","setStorage","path","component"],"sourceRoot":""}