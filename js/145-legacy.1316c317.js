"use strict";(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[145],{5291:function(e,t,n){n.r(t),n.d(t,{default:function(){return L}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"main"},[n("van-nav-bar",{attrs:{fixed:""},scopedSlots:e._u([{key:"right",fn:function(){return[n("van-icon",{attrs:{name:"search",size:"0.64rem",color:"#fff"},on:{click:e.showSerchComponent}})]},proxy:!0}])})],1),n("div",[n("van-tabs",{attrs:{sticky:"","offset-top":"1.23rem",animated:"",color:"rgb(54, 101, 255)"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.userChannelList,(function(t){return n("van-tab",{key:t.id,attrs:{title:t.name,name:t.id}},[n("article-list",{attrs:{channelId:e.active}})],1)})),1)],1)])},r=[],i=n(6198),s=(n(8975),n(5394)),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有新闻给你看辣！","immediate-check":!1,offset:"50"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.articleList,(function(t){return n("article-item",{key:t.art_id,attrs:{articleObj:t},on:{disLikeEV:e.disLikeFn,feedbackDustbin:e.dustbin},nativeOn:{click:function(n){return e.itemClickFn(t.art_id)}}})})),1)],1)],1)},u=[],o=(n(5642),n(8398)),l=n(8932),d=(n(2222),n(9653),n(9962)),m={data:function(){return{articleList:[],loading:!1,finished:!1,defaultTime:(new Date).getTime(),isLoading:!1}},created:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.Us)({channel_id:e.channelId,timestamp:e.defaultTime});case 2:n=t.sent,e.articleList=n.data.data.results,e.defaultTime=n.data.data.pre_timestamp;case 5:case"end":return t.stop()}}),t)})))()},methods:{onLoad:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.Us)({channel_id:e.channelId,timestamp:e.defaultTime});case 2:n=t.sent,null===n.data.data.pre_timestamp?e.finished=!0:(e.articleList=[].concat((0,l.Z)(e.articleList),(0,l.Z)(n.data.data.results)),e.defaultTime=n.data.data.pre_timestamp,e.loading=!1);case 4:case"end":return t.stop()}}),t)})))()},onRefresh:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.articleList=[],e.defaultTime=(new Date).getTime(),t.next=4,(0,s.Us)({channel_id:e.channelId,timestamp:e.defaultTime});case 4:n=t.sent,e.articleList=[].concat((0,l.Z)(e.articleList),(0,l.Z)(n.data.data.results)),e.defaultTime=n.data.data.pre_timestamp,e.isLoading=!1;case 8:case"end":return t.stop()}}),t)})))()},disLikeFn:function(e){return(0,i.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.AJ)({artId:e});case 2:(0,o.Z)({type:"success",message:"之后会减少类似推荐"});case 3:case"end":return t.stop()}}),t)})))()},dustbin:function(e,t){return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.dv)({artId:e,type:t});case 2:(0,o.Z)({type:"success",message:"反馈成功"});case 3:case"end":return n.stop()}}),n)})))()},itemClickFn:function(e){this.$router.push({path:"/article_detail?art_id=".concat(e)})}},props:{channelId:Number},components:{ArticleItem:d.Z}},f=m,h=n(1001),p=(0,h.Z)(f,c,u,!1,null,"16442ada",null),v=p.exports,g={data:function(){return{userChannelList:[],active:0}},created:function(){this.getUserChannelList()},methods:{getUserChannelList:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.U5)();case 2:n=t.sent,e.userChannelList=n.data.data.channels;case 4:case"end":return t.stop()}}),t)})))()},showSerchComponent:function(){this.$router.push("/search")}},components:{ArticleList:v}},k=g,w=(0,h.Z)(k,a,r,!1,null,"454a6c07",null),L=w.exports}}]);
//# sourceMappingURL=145-legacy.1316c317.js.map