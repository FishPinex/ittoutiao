(self["webpackChunkheimatoutiao"]=self["webpackChunkheimatoutiao"]||[]).push([[546],{5439:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return w}});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{fixed:"",title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),0===Object.keys(t.articleDetailList).length?n("van-loading",{staticClass:"loading",attrs:{color:"#1989fa"}},[t._v("加载中")]):n("div",[n("div",{staticClass:"article-container"},[n("h1",{staticClass:"art-title"},[t._v(t._s(t.articleDetailList.title))]),n("van-cell",{attrs:{center:"",title:t.articleDetailList.aut_name,label:t.articleDetailList.pubdate},scopedSlots:t._u([{key:"icon",fn:function(){return[n("img",{staticClass:"avatar",attrs:{src:t.articleDetailList.aut_photo,alt:""}})]},proxy:!0},{key:"default",fn:function(){return[n("div",[!0===t.articleDetailList.is_followed?n("van-button",{attrs:{type:"info",size:"mini"},on:{click:function(e){return t.attention(!0)}}},[t._v("已关注")]):n("van-button",{attrs:{icon:"plus",type:"info",size:"mini",plain:""},on:{click:function(e){return t.attention(!1)}}},[t._v("关注")])],1)]},proxy:!0}])}),n("van-divider"),n("div",{staticClass:"art-content",domProps:{innerHTML:t._s(t.articleDetailList.content)}}),n("van-divider",[t._v("End")]),n("div",{staticClass:"like-box"},[1===t.articleDetailList.attitude?n("van-button",{attrs:{icon:"good-job",type:"danger",size:"small"},on:{click:function(e){return t.loveFn(!0)}}},[t._v("已点赞")]):-1===t.articleDetailList.attitude?n("van-button",{attrs:{icon:"good-job-o",type:"danger",plain:"",size:"small"},on:{click:function(e){return t.loveFn(!1)}}},[t._v("点赞")]):t._e()],1)],1),n("comment")],1)],1)},r=[],i=n(6198),o=(n(8975),n(5394)),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"cmt-list",class:{"cmt-container-1":!t.isShowCommentInputVisible,"cmt-container-2":t.isShowCommentInputVisible}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多评论辣，快去发表评论吧","immediate-check":!1},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.commentList,(function(e){return n("div",{key:e.com_id,staticClass:"cmt-item"},[n("div",{staticClass:"cmt-header"},[n("div",{staticClass:"cmt-header-left"},[n("img",{staticClass:"avatar",attrs:{src:e.aut_photo,alt:""}}),n("span",{staticClass:"uname"},[t._v(t._s(e.aut_name))])]),n("div",{staticClass:"cmt-header-right"},[!0===e.is_liking?n("van-icon",{attrs:{name:"like",size:"16",color:"red"},on:{click:function(n){return t.likeComment(!0,e)}}}):n("van-icon",{attrs:{name:"like-o",size:"16",color:"gray"},on:{click:function(n){return t.likeComment(!1,e)}}})],1)]),n("div",{staticClass:"cmt-body"},[t._v(t._s(e.content))]),n("div",{staticClass:"cmt-footer"},[t._v(t._s(e.pubdate))])])})),0)],1),!1===t.isShowCommentInputVisible?n("div",{staticClass:"add-cmt-box van-hairline--top"},[n("van-icon",{attrs:{name:"arrow-left",size:"0.48rem"},on:{click:function(e){return t.$router.back()}}}),n("div",{staticClass:"ipt-cmt-div",on:{click:function(e){t.isShowCommentInputVisible=!0}}},[t._v("发表评论")]),n("div",{staticClass:"icon-box"},[n("van-badge",{attrs:{content:0===t.totalComment?"":t.totalComment,max:"99"}},[n("van-icon",{attrs:{name:"comment-o",size:"0.53333334rem"},on:{click:t.scrollToComment}})],1),n("span",[!1===t.isStar?n("van-icon",{attrs:{name:"star-o",size:"0.53333334rem"},on:{click:t.starFn}}):n("van-icon",{attrs:{name:"star",size:"0.53333334rem",color:"red"},on:{click:t.starFn}})],1),n("van-icon",{attrs:{name:"share-o",size:"0.53333334rem"},on:{click:t.showShareFn}})],1)],1):n("div",{staticClass:"cmt-box van-hairline--top"},[n("textarea",{directives:[{name:"fofo",rawName:"v-fofo"},{name:"model",rawName:"v-model.trim",value:t.commentContent,expression:"commentContent",modifiers:{trim:!0}}],attrs:{placeholder:"请发表一个友善的评论哟"},domProps:{value:t.commentContent},on:{blur:[t.blurFn,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.commentContent=e.target.value.trim())}}}),n("van-button",{attrs:{type:"default",disabled:0===t.commentContent.length},on:{click:t.sendCommentFn}},[t._v("发布")])],1),n("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)},c=[],l=n(8932),u=(n(2222),{data:function(){return{commentList:[],lastId:null,isShowCommentInputVisible:!1,totalComment:0,commentContent:"",loading:!1,finished:!1,isStar:!1,showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]]}},created:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.x9)({art_id:t.$route.query.art_id});case 2:n=e.sent,t.commentList=n.data.data.results,t.totalComment=n.data.data.total_count,t.lastId=n.data.data.last_id,0===t.totalComment&&(t.finished=!0);case 7:case"end":return e.stop()}}),e)})))()},methods:{likeComment:function(t,e){return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==t){n.next=6;break}return e.is_liking=!1,n.next=4,(0,o.PI)({com_id:e.com_id});case 4:n.next=9;break;case 6:return e.is_liking=!0,n.next=9,(0,o.Yf)({com_id:e.com_id});case 9:case"end":return n.stop()}}),n)})))()},scrollToComment:function(){document.querySelector(".like-box").scrollIntoView({behavior:"smooth"})},sendCommentFn:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.qQ)({id:t.$route.query.art_id,content:t.commentContent});case 2:n=e.sent,t.commentList.unshift(n.data.data.new_obj),t.totalComment++,t.scrollToComment(),t.commentContent="";case 7:case"end":return e.stop()}}),e)})))()},blurFn:function(){var t=this;setTimeout((function(){t.isShowCommentInputVisible=!1}),0)},onLoad:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.commentList.length>0)){e.next=12;break}return e.next=3,(0,o.x9)({art_id:t.$route.query.art_id,offset:t.lastId});case 3:n=e.sent,console.log(n),t.commentList=[].concat((0,l.Z)(t.commentList),(0,l.Z)(n.data.data.results)),t.totalComment=n.data.data.total_count,t.lastId=n.data.data.last_id,null===t.lastId&&(t.finished=!0),t.loading=!1,e.next=13;break;case 12:t.loading=!1;case 13:case"end":return e.stop()}}),e)})))()},showShareFn:function(){this.showShare=!0},starFn:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isStar=!t.isStar,e.next=3,(0,o.Yq)({art_id:t.$route.query.art_id});case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})))()}}}),m=u,d=n(1001),f=(0,d.Z)(m,s,c,!1,null,"ef122136",null),v=f.exports,h={name:"ArticleDetail",data:function(){return{articleDetailList:{}}},created:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Qv)({article_id:t.$route.query.art_id});case 2:n=e.sent,t.articleDetailList=n.data.data;case 4:case"end":return e.stop()}}),e)})))()},methods:{attention:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==t){n.next=6;break}return e.articleDetailList.is_followed=!1,n.next=4,(0,o.TO)({aut_id:e.articleDetailList.aut_id});case 4:n.next=9;break;case 6:return e.articleDetailList.is_followed=!0,n.next=9,(0,o.ph)({aut_id:e.articleDetailList.aut_id});case 9:case"end":return n.stop()}}),n)})))()},loveFn:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!0!==t){n.next=8;break}return e.articleDetailList.attitude=-1,n.next=4,(0,o.Id)({art_id:e.$route.query.art_id});case 4:a=n.sent,console.log(a),n.next=13;break;case 8:return e.articleDetailList.attitude=1,n.next=11,(0,o.Te)({art_id:e.$route.query.art_id});case 11:r=n.sent,console.log(r);case 13:case"end":return n.stop()}}),n)})))()}},components:{Comment:v}},p=h,_=(0,d.Z)(p,a,r,!1,null,"94444fba",null),w=_.exports},8457:function(t,e,n){"use strict";var a=n(7854),r=n(9974),i=n(6916),o=n(7908),s=n(3411),c=n(7659),l=n(4411),u=n(6244),m=n(6135),d=n(8554),f=n(1246),v=a.Array;t.exports=function(t){var e=o(t),n=l(this),a=arguments.length,h=a>1?arguments[1]:void 0,p=void 0!==h;p&&(h=r(h,a>2?arguments[2]:void 0));var _,w,b,g,k,C,x=f(e),y=0;if(!x||this==v&&c(x))for(_=u(e),w=n?new this(_):v(_);_>y;y++)C=p?h(e[y],y):e[y],m(w,y,C);else for(g=d(e,x),k=g.next,w=n?new this:[];!(b=i(k,g)).done;y++)C=p?s(g,h,[b.value,y],!0):b.value,m(w,y,C);return w.length=y,w}},3411:function(t,e,n){var a=n(9670),r=n(9212);t.exports=function(t,e,n,i){try{return i?e(a(n)[0],n[1]):e(n)}catch(o){r(t,"throw",o)}}},1038:function(t,e,n){var a=n(2109),r=n(8457),i=n(7072),o=!i((function(t){Array.from(t)}));a({target:"Array",stat:!0,forced:o},{from:r})},3748:function(t,e,n){"use strict";function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}n.d(e,{Z:function(){return a}})},8932:function(t,e,n){"use strict";n.d(e,{Z:function(){return c}});var a=n(3748);function r(t){if(Array.isArray(t))return(0,a.Z)(t)}n(2526),n(1817),n(1539),n(2165),n(8783),n(3948),n(1038);function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var o=n(8936);n(1703);function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return r(t)||i(t)||(0,o.Z)(t)||s()}},8936:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});n(7042),n(1539),n(8309),n(1038),n(8783),n(4916),n(7601);var a=n(3748);function r(t,e){if(t){if("string"===typeof t)return(0,a.Z)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,a.Z)(t,e):void 0}}}}]);
//# sourceMappingURL=546-legacy.cd69cb30.js.map